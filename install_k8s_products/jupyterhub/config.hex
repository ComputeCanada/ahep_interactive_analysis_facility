0000000: 0a23 2054 6869 7320 6669 6c65 2063 616e  .# This file can
0000010: 2075 7064 6174 6520 7468 6520 4a75 7079   update the Jupy
0000020: 7465 7248 7562 2048 656c 6d20 6368 6172  terHub Helm char
0000030: 7427 7320 6465 6661 756c 7420 636f 6e66  t's default conf
0000040: 6967 7572 6174 696f 6e20 7661 6c75 6573  iguration values
0000050: 2e0a 2320 230a 2320 2320 466f 7220 7265  ..# #.# # For re
0000060: 6665 7265 6e63 6520 7365 6520 7468 6520  ference see the 
0000070: 636f 6e66 6967 7572 6174 696f 6e20 7265  configuration re
0000080: 6665 7265 6e63 6520 616e 6420 6465 6661  ference and defa
0000090: 756c 7420 7661 6c75 6573 2c20 6275 7420  ult values, but 
00000a0: 6d61 6b65 0a23 2023 2073 7572 6520 746f  make.# # sure to
00000b0: 2072 6566 6572 2074 6f20 7468 6520 4865   refer to the He
00000c0: 6c6d 2063 6861 7274 2076 6572 7369 6f6e  lm chart version
00000d0: 206f 6620 696e 7465 7265 7374 2074 6f20   of interest to 
00000e0: 796f 7521 0a23 2023 0a23 2023 2049 6e74  you!.# #.# # Int
00000f0: 726f 6475 6374 696f 6e20 746f 2059 414d  roduction to YAM
0000100: 4c3a 2020 2020 2068 7474 7073 3a2f 2f77  L:     https://w
0000110: 7777 2e79 6f75 7475 6265 2e63 6f6d 2f77  ww.youtube.com/w
0000120: 6174 6368 3f76 3d63 644c 4e4b 556f 4d63  atch?v=cdLNKUoMc
0000130: 3663 0a23 2023 2043 6861 7274 2063 6f6e  6c.# # Chart con
0000140: 6669 6720 7265 6665 7265 6e63 653a 2020  fig reference:  
0000150: 2068 7474 7073 3a2f 2f7a 6572 6f2d 746f   https://zero-to
0000160: 2d6a 7570 7974 6572 6875 622e 7265 6164  -jupyterhub.read
0000170: 7468 6564 6f63 732e 696f 2f65 6e2f 7374  thedocs.io/en/st
0000180: 6162 6c65 2f72 6573 6f75 7263 6573 2f72  able/resources/r
0000190: 6566 6572 656e 6365 2e68 746d 6c0a 2320  eference.html.# 
00001a0: 2320 4368 6172 7420 6465 6661 756c 7420  # Chart default 
00001b0: 7661 6c75 6573 3a20 2020 2020 6874 7470  values:     http
00001c0: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f6a  s://github.com/j
00001d0: 7570 7974 6572 6875 622f 7a65 726f 2d74  upyterhub/zero-t
00001e0: 6f2d 6a75 7079 7465 7268 7562 2d6b 3873  o-jupyterhub-k8s
00001f0: 2f62 6c6f 622f 4845 4144 2f6a 7570 7974  /blob/HEAD/jupyt
0000200: 6572 6875 622f 7661 6c75 6573 2e79 616d  erhub/values.yam
0000210: 6c0a 2320 2320 4176 6169 6c61 626c 6520  l.# # Available 
0000220: 6368 6172 7420 7665 7273 696f 6e73 3a20  chart versions: 
0000230: 6874 7470 733a 2f2f 6a75 7079 7465 7268  https://jupyterh
0000240: 7562 2e67 6974 6875 622e 696f 2f68 656c  ub.github.io/hel
0000250: 6d2d 6368 6172 742f 0a23 2023 0a0a 6465  m-chart/.# #..de
0000260: 6275 673a 0a20 2065 6e61 626c 6564 3a20  bug:.  enabled: 
0000270: 7472 7565 0a0a 6875 623a 0a20 2065 7874  true..hub:.  ext
0000280: 7261 436f 6e66 6967 3a0a 2020 2020 3030  raConfig:.    00
0000290: 315f 436f 6e66 6967 2e70 793a 207c 0a20  1_Config.py: |. 
00002a0: 2020 2020 2069 6d70 6f72 7420 6f73 0a20       import os. 
00002b0: 2020 2020 2064 6566 206d 795f 6175 7468       def my_auth
00002c0: 5f73 7461 7465 5f68 6f6f 6b28 7370 6177  _state_hook(spaw
00002d0: 6e65 722c 2061 7574 685f 7374 6174 6529  ner, auth_state)
00002e0: 3a0a 2020 2020 2020 2020 7072 696e 7428  :.        print(
00002f0: 223d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  "===============
0000300: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
0000310: 3d3d 2229 0a20 2020 2020 2020 2070 7269  ==").        pri
0000320: 6e74 2822 7573 6572 6e61 6d65 3a20 222c  nt("username: ",
0000330: 2073 7061 776e 6572 2e75 7365 722e 6e61   spawner.user.na
0000340: 6d65 290a 2020 2020 3030 325f 436f 6e66  me).    002_Conf
0000350: 6967 2e70 793a 207c 0a20 2020 2020 2069  ig.py: |.      i
0000360: 6d70 6f72 7420 6f73 0a20 2020 2020 2064  mport os.      d
0000370: 6566 206d 795f 686f 6f6b 2873 7061 776e  ef my_hook(spawn
0000380: 6572 293a 0a20 2020 2020 2020 2075 7365  er):.        use
0000390: 726e 616d 6520 3d20 7370 6177 6e65 722e  rname = spawner.
00003a0: 7573 6572 2e6e 616d 650a 2020 2020 2020  user.name.      
00003b0: 2020 7370 6177 6e65 722e 656e 7669 726f    spawner.enviro
00003c0: 6e6d 656e 745b 2754 4553 5427 5d3d 7573  nment['TEST']=us
00003d0: 6572 6e61 6d65 0a20 2020 2020 2020 2073  ername.        s
00003e0: 7061 776e 6572 2e65 6e76 6972 6f6e 6d65  pawner.environme
00003f0: 6e74 5b27 4e42 5f55 5345 5227 5d3d 7573  nt['NB_USER']=us
0000400: 6572 6e61 6d65 0a20 2020 2020 2020 2073  ername.        s
0000410: 7061 776e 6572 2e65 6e76 6972 6f6e 6d65  pawner.environme
0000420: 6e74 5b27 4e42 5f47 524f 5550 275d 3d22  nt['NB_GROUP']="
0000430: 6475 6e65 220a 2020 2020 2020 2020 7370  dune".        sp
0000440: 6177 6e65 722e 656e 7669 726f 6e6d 656e  awner.environmen
0000450: 745b 274e 425f 4749 4427 5d3d 2239 3031  t['NB_GID']="901
0000460: 3030 220a 2020 2020 2020 2020 7370 6177  00".        spaw
0000470: 6e65 722e 656e 7669 726f 6e6d 656e 745b  ner.environment[
0000480: 274c 445f 5052 454c 4f41 4427 5d3d 276c  'LD_PRELOAD']='l
0000490: 6962 6e73 735f 7772 6170 7065 722e 736f  ibnss_wrapper.so
00004a0: 270a 2020 2020 2020 2020 7370 6177 6e65  '.        spawne
00004b0: 722e 656e 7669 726f 6e6d 656e 745b 274e  r.environment['N
00004c0: 5353 5f57 5241 5050 4552 5f50 4153 5357  SS_WRAPPER_PASSW
00004d0: 4427 5d3d 272f 746d 702f 636f 6e66 6967  D']='/tmp/config
00004e0: 5f64 6174 612f 7061 7373 7764 270a 2020  _data/passwd'.  
00004f0: 2020 2020 2020 7370 6177 6e65 722e 656e        spawner.en
0000500: 7669 726f 6e6d 656e 745b 274e 5353 5f57  vironment['NSS_W
0000510: 5241 5050 4552 5f47 524f 5550 275d 3d27  RAPPER_GROUP']='
0000520: 2f74 6d70 2f63 6f6e 6669 675f 6461 7461  /tmp/config_data
0000530: 2f67 726f 7570 270a 2020 2020 2020 2020  /group'.        
0000540: 686f 6d65 5f70 6174 683d 6622 2f68 6f6d  home_path=f"/hom
0000550: 652f 7b75 7365 726e 616d 657d 220a 2020  e/{username}".  
0000560: 2020 2020 2020 6461 7461 5f70 6174 683d        data_path=
0000570: 6622 2f64 756e 652f 6461 7461 2f7b 7573  f"/dune/data/{us
0000580: 6572 6e61 6d65 7d22 0a20 2020 2020 2020  ername}".       
0000590: 2061 7070 5f70 6174 683d 6622 2f64 756e   app_path=f"/dun
00005a0: 652f 6170 702f 7b75 7365 726e 616d 657d  e/app/{username}
00005b0: 220a 2020 2020 2020 2020 7370 6177 6e65  ".        spawne
00005c0: 722e 656e 7669 726f 6e6d 656e 745b 2748  r.environment['H
00005d0: 4f4d 4527 5d3d 686f 6d65 5f70 6174 680a  OME']=home_path.
00005e0: 2020 2020 2020 2020 7370 6177 6e65 722e          spawner.
00005f0: 656e 7669 726f 6e6d 656e 745b 2744 4154  environment['DAT
0000600: 4127 5d3d 6461 7461 5f70 6174 680a 2020  A']=data_path.  
0000610: 2020 2020 2020 7370 6177 6e65 722e 656e        spawner.en
0000620: 7669 726f 6e6d 656e 745b 2741 5050 275d  vironment['APP']
0000630: 3d61 7070 5f70 6174 680a 2020 2020 2020  =app_path.      
0000640: 2020 7370 6177 6e65 722e 776f 726b 696e    spawner.workin
0000650: 675f 6469 7220 3d20 6627 2f68 6f6d 652f  g_dir = f'/home/
0000660: 7b75 7365 726e 616d 657d 270a 2020 2020  {username}'.    
0000670: 2020 2020 7370 6177 6e65 722e 6e6f 7465      spawner.note
0000680: 626f 6f6b 5f64 6972 203d 2066 272f 686f  book_dir = f'/ho
0000690: 6d65 2f7b 7573 6572 6e61 6d65 7d27 0a0a  me/{username}'..
00006a0: 2020 2020 3030 335f 436f 6e66 6967 2e70      003_Config.p
00006b0: 793a 207c 0a20 2020 2020 2063 2e53 7061  y: |.      c.Spa
00006c0: 776e 6572 2e61 7574 685f 7374 6174 655f  wner.auth_state_
00006d0: 686f 6f6b 3d6d 795f 6175 7468 5f73 7461  hook=my_auth_sta
00006e0: 7465 5f68 6f6f 6b0a 2020 2020 2020 632e  te_hook.      c.
00006f0: 5370 6177 6e65 722e 7072 655f 7370 6177  Spawner.pre_spaw
0000700: 6e5f 686f 6f6b 203d 206d 795f 686f 6f6b  n_hook = my_hook
0000710: 0a20 2020 2020 2063 2e4b 7562 6553 7061  .      c.KubeSpa
0000720: 776e 6572 2e61 7267 7320 3d20 5b27 2d2d  wner.args = ['--
0000730: 616c 6c6f 772d 726f 6f74 275d 0a0a 0a20  allow-root']... 
0000740: 2063 6f6e 6669 673a 0a20 2020 2023 476c   config:.    #Gl
0000750: 6f62 7573 4f41 7574 6865 6e74 6963 6174  obusOAuthenticat
0000760: 6f72 3a0a 2020 2020 2320 2063 6c69 656e  or:.    #  clien
0000770: 745f 6964 3a20 3837 6164 3263 6663 2d61  t_id: 87ad2cfc-a
0000780: 3636 352d 3436 3461 2d39 3662 332d 3862  665-464a-96b3-8b
0000790: 3738 3434 3362 6634 6630 0a20 2020 2023  78443bf4f0.    #
00007a0: 2020 636c 6965 6e74 5f73 6563 7265 743a    client_secret:
00007b0: 2032 576e 4c30 4c49 715a 696a 3048 7778   2WnL0LIqZij0Hwx
00007c0: 5964 4b41 342b 4150 3554 7937 7938 3479  YdKA4+AP5Ty7y84y
00007d0: 5839 4132 3977 6650 562b 5249 3d0a 2020  X9A29wfPV+RI=.  
00007e0: 2020 2320 206f 6175 7468 5f63 616c 6c62    #  oauth_callb
00007f0: 6163 6b5f 7572 6c3a 2068 7474 7073 3a2f  ack_url: https:/
0000800: 2f61 7869 6f6e 2e61 7869 616c 7665 6374  /axion.axialvect
0000810: 6f72 2d6c 6162 2e63 6f6d 2f68 7562 2f6f  or-lab.com/hub/o
0000820: 6175 7468 5f63 616c 6c62 6163 6b0a 2020  auth_callback.  
0000830: 2020 2320 2061 6c6c 6f77 6564 5f67 6c6f    #  allowed_glo
0000840: 6275 735f 6772 6f75 7073 3a0a 2020 2020  bus_groups:.    
0000850: 2320 2020 202d 2027 3039 6166 6662 3833  #    - '09affb83
0000860: 2d34 3130 332d 3131 6563 2d62 3037 392d  -4103-11ec-b079-
0000870: 6635 3631 6235 6134 3838 6265 270a 2020  f561b5a488be'.  
0000880: 2020 2320 2023 6964 656e 7469 7479 5f70    #  #identity_p
0000890: 726f 7669 6465 723a 2066 6e61 6c2e 676f  rovider: fnal.go
00008a0: 760a 2020 2020 234a 7570 7974 6572 4875  v.    #JupyterHu
00008b0: 623a 0a20 2020 2023 2020 6175 7468 656e  b:.    #  authen
00008c0: 7469 6361 746f 725f 636c 6173 733a 2067  ticator_class: g
00008d0: 6c6f 6275 7320 2020 2020 2020 2020 2020  lobus           
00008e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
00008f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
0000900: 2020 0a20 2020 2041 7574 6865 6e74 6963    .    Authentic
0000910: 6174 6f72 3a0a 2020 2020 2020 656e 6162  ator:.      enab
0000920: 6c65 5f61 7574 685f 7374 6174 653a 2074  le_auth_state: t
0000930: 7275 650a 2020 2020 4349 4c6f 676f 6e4f  rue.    CILogonO
0000940: 4175 7468 656e 7469 6361 746f 723a 0a20  Authenticator:. 
0000950: 2020 2020 2063 6c69 656e 745f 6964 3a20       client_id: 
0000960: 2763 696c 6f67 6f6e 3a2f 636c 6965 6e74  'cilogon:/client
0000970: 5f69 642f 3430 3563 6237 6234 6536 6262  _id/405cb7b4e6bb
0000980: 3461 3163 6337 3933 3063 3865 3563 3330  4a1cc7930c8e5c30
0000990: 6438 6565 270a 2020 2020 2020 636c 6965  d8ee'.      clie
00009a0: 6e74 5f73 6563 7265 743a 2047 4c6a 754d  nt_secret: GLjuM
00009b0: 7655 5765 336b 624e 6379 316a 4c6a 7a38  vUWe3kbNcy1jLjz8
00009c0: 5049 5368 4e45 646d 524b 6e32 4e55 3659  PIShNEdmRKn2NU6Y
00009d0: 3541 547a 7156 3555 5077 7a34 666f 346e  5ATzqV5UPwz4fo4n
00009e0: 6d70 6f71 7a42 4f54 3565 7445 3277 3374  mpoqzBOT5etE2w3t
00009f0: 6a30 5132 5468 764b 776f 6957 4753 5442  j0Q2ThvKwoiWGSTB
0000a00: 670a 2020 2020 2020 636c 6965 6e74 5f69  g.      client_i
0000a10: 645f 6973 7375 6564 5f61 743a 2031 3633  d_issued_at: 163
0000a20: 3832 3034 3238 340a 2020 2020 2020 7265  8204284.      re
0000a30: 6769 7374 7261 7469 6f6e 5f63 6c69 656e  gistration_clien
0000a40: 745f 7572 693a 2027 6874 7470 733a 2f2f  t_uri: 'https://
0000a50: 6369 6c6f 676f 6e2e 6f72 672f 6f61 7574  cilogon.org/oaut
0000a60: 6832 2f6f 6964 632d 636d 3f63 6c69 656e  h2/oidc-cm?clien
0000a70: 745f 6964 3d63 696c 6f67 6f6e 3a2f 636c  t_id=cilogon:/cl
0000a80: 6965 6e74 5f69 642f 3430 3563 6237 6234  ient_id/405cb7b4
0000a90: 6536 6262 3461 3163 6337 3933 3063 3865  e6bb4a1cc7930c8e
0000aa0: 3563 3330 6438 6565 270a 2020 2020 2020  5c30d8ee'.      
0000ab0: 6f61 7574 685f 6361 6c6c 6261 636b 5f75  oauth_callback_u
0000ac0: 726c 3a20 6874 7470 733a 2f2f 6178 696f  rl: https://axio
0000ad0: 6e2e 6178 6961 6c76 6563 746f 722d 6c61  n.axialvector-la
0000ae0: 622e 636f 6d2f 6875 622f 6f61 7574 685f  b.com/hub/oauth_
0000af0: 6361 6c6c 6261 636b 0a20 2020 2020 2075  callback.      u
0000b00: 7365 726e 616d 655f 636c 6169 6d3a 2027  sername_claim: '
0000b10: 7569 6427 0a20 2020 2020 2073 636f 7065  uid'.      scope
0000b20: 3a0a 2020 2020 2020 2020 2d20 6f70 656e  :.        - open
0000b30: 6964 0a20 2020 2020 2020 202d 2065 6d61  id.        - ema
0000b40: 696c 0a20 2020 2020 2020 202d 206f 7267  il.        - org
0000b50: 2e63 696c 6f67 6f6e 2e75 7365 7269 6e66  .cilogon.userinf
0000b60: 6f0a 2020 2020 2020 2020 2d20 776c 6367  o.        - wlcg
0000b70: 2e67 726f 7570 733a 2f64 756e 650a 2020  .groups:/dune.  
0000b80: 2020 2020 2020 2d20 776c 6367 2e63 6170        - wlcg.cap
0000b90: 6162 696c 6974 7973 6574 3a2f 6475 6e65  abilityset:/dune
0000ba0: 616e 610a 2020 2020 4a75 7079 7465 7248  ana.    JupyterH
0000bb0: 7562 3a0a 2020 2020 2020 6175 7468 656e  ub:.      authen
0000bc0: 7469 6361 746f 725f 636c 6173 733a 2063  ticator_class: c
0000bd0: 696c 6f67 6f6e 0a20 2020 2020 2061 646d  ilogon.      adm
0000be0: 696e 5f61 6363 6573 733a 2074 7275 650a  in_access: true.
0000bf0: 2020 2020 2020 6164 6d69 6e5f 7573 6572        admin_user
0000c00: 733a 0a20 2020 2020 2020 202d 206a 7570  s:.        - jup
0000c10: 7974 6572 0a0a 2020 6578 7472 6156 6f6c  yter..  extraVol
0000c20: 756d 6573 3a0a 2020 2d20 6e61 6d65 3a20  umes:.  - name: 
0000c30: 6170 700a 2020 2020 6365 7068 6673 3a0a  app.    cephfs:.
0000c40: 2020 2020 2020 6d6f 6e69 746f 7273 3a0a        monitors:.
0000c50: 2020 2020 2020 2d20 3130 2e33 302e 3230        - 10.30.20
0000c60: 312e 333a 3637 3839 0a20 2020 2020 202d  1.3:6789.      -
0000c70: 2031 302e 3330 2e32 3032 2e33 3a36 3738   10.30.202.3:678
0000c80: 390a 2020 2020 2020 2d20 3130 2e33 302e  9.      - 10.30.
0000c90: 3230 332e 333a 3637 3839 0a20 2020 2020  203.3:6789.     
0000ca0: 2070 6174 683a 202f 766f 6c75 6d65 732f   path: /volumes/
0000cb0: 5f6e 6f67 726f 7570 2f61 3336 6632 3539  _nogroup/a36f259
0000cc0: 632d 3538 3266 2d34 3830 642d 3934 3038  c-582f-480d-9408
0000cd0: 2d39 6462 3961 3334 3935 6239 650a 2020  -9db9a3495b9e.  
0000ce0: 2020 2020 7573 6572 3a20 6170 702d 7265      user: app-re
0000cf0: 6164 2d77 7269 7465 0a20 2020 2020 2073  ad-write.      s
0000d00: 6563 7265 7452 6566 3a0a 2020 2020 2020  ecretRef:.      
0000d10: 2020 6e61 6d65 3a20 6170 702d 7365 6372    name: app-secr
0000d20: 6574 2d72 770a 2020 2d20 6e61 6d65 3a20  et-rw.  - name: 
0000d30: 6461 7461 0a20 2020 2063 6570 6866 733a  data.    cephfs:
0000d40: 0a20 2020 2020 206d 6f6e 6974 6f72 733a  .      monitors:
0000d50: 0a20 2020 2020 202d 2031 302e 3330 2e32  .      - 10.30.2
0000d60: 3031 2e33 3a36 3738 390a 2020 2020 2020  01.3:6789.      
0000d70: 2d20 3130 2e33 302e 3230 322e 333a 3637  - 10.30.202.3:67
0000d80: 3839 0a20 2020 2020 202d 2031 302e 3330  89.      - 10.30
0000d90: 2e32 3033 2e33 3a36 3738 390a 2020 2020  .203.3:6789.    
0000da0: 2020 7061 7468 3a20 2f76 6f6c 756d 6573    path: /volumes
0000db0: 2f5f 6e6f 6772 6f75 702f 6333 3862 6165  /_nogroup/c38bae
0000dc0: 3832 2d64 3730 332d 3431 6332 2d38 3861  82-d703-41c2-88a
0000dd0: 322d 6330 3530 3761 3062 3934 6261 0a20  2-c0507a0b94ba. 
0000de0: 2020 2020 2075 7365 723a 2064 6174 612d       user: data-
0000df0: 7265 6164 2d77 7269 7465 0a20 2020 2020  read-write.     
0000e00: 2073 6563 7265 7452 6566 3a0a 2020 2020   secretRef:.    
0000e10: 2020 2020 6e61 6d65 3a20 6461 7461 2d73      name: data-s
0000e20: 6563 7265 742d 7277 0a20 202d 206e 616d  ecret-rw.  - nam
0000e30: 653a 2073 746f 7265 0a20 2020 2063 6570  e: store.    cep
0000e40: 6866 733a 0a20 2020 2020 206d 6f6e 6974  hfs:.      monit
0000e50: 6f72 733a 0a20 2020 2020 202d 2031 302e  ors:.      - 10.
0000e60: 3330 2e32 3031 2e33 3a36 3738 390a 2020  30.201.3:6789.  
0000e70: 2020 2020 2d20 3130 2e33 302e 3230 322e      - 10.30.202.
0000e80: 333a 3637 3839 0a20 2020 2020 202d 2031  3:6789.      - 1
0000e90: 302e 3330 2e32 3033 2e33 3a36 3738 390a  0.30.203.3:6789.
0000ea0: 2020 2020 2020 7061 7468 3a20 2f76 6f6c        path: /vol
0000eb0: 756d 6573 2f5f 6e6f 6772 6f75 702f 6136  umes/_nogroup/a6
0000ec0: 3531 6564 3732 2d33 6265 652d 3433 3139  51ed72-3bee-4319
0000ed0: 2d38 6362 392d 3762 3435 6234 3161 6438  -8cb9-7b45b41ad8
0000ee0: 3931 0a20 2020 2020 2075 7365 723a 2073  91.      user: s
0000ef0: 6861 7265 642d 6461 7461 2d72 6561 642d  hared-data-read-
0000f00: 7772 6974 650a 2020 2020 2020 7365 6372  write.      secr
0000f10: 6574 5265 663a 0a20 2020 2020 2020 206e  etRef:.        n
0000f20: 616d 653a 2073 746f 7265 2d73 6563 7265  ame: store-secre
0000f30: 742d 7277 0a20 2065 7874 7261 566f 6c75  t-rw.  extraVolu
0000f40: 6d65 4d6f 756e 7473 3a0a 2020 2d20 6e61  meMounts:.  - na
0000f50: 6d65 3a20 6461 7461 0a20 2020 206d 6f75  me: data.    mou
0000f60: 6e74 5061 7468 3a20 2f64 756e 652f 6461  ntPath: /dune/da
0000f70: 7461 2f0a 2020 2d20 6e61 6d65 3a20 6170  ta/.  - name: ap
0000f80: 700a 2020 2020 6d6f 756e 7450 6174 683a  p.    mountPath:
0000f90: 202f 6475 6e65 2f61 7070 2f0a 2020 2d20   /dune/app/.  - 
0000fa0: 6e61 6d65 3a20 7374 6f72 650a 2020 2020  name: store.    
0000fb0: 6d6f 756e 7450 6174 683a 202f 6461 7461  mountPath: /data
0000fc0: 5f73 746f 7265 2f0a 0a73 696e 676c 6575  _store/..singleu
0000fd0: 7365 723a 0a20 2075 6964 3a20 300a 2020  ser:.  uid: 0.  
0000fe0: 636d 643a 2022 7374 6172 742d 6e6f 7465  cmd: "start-note
0000ff0: 626f 6f6b 2e73 6822 0a20 2065 7874 7261  book.sh".  extra
0001000: 456e 763a 0a20 2020 2047 5241 4e54 5f53  Env:.    GRANT_S
0001010: 5544 4f3a 2022 7965 7322 0a20 2020 204a  UDO: "yes".    J
0001020: 5550 5954 4552 4855 425f 5349 4e47 4c45  UPYTERHUB_SINGLE
0001030: 5553 4552 5f41 5050 3a20 226a 7570 7974  USER_APP: "jupyt
0001040: 6572 5f73 6572 7665 722e 7365 7276 6572  er_server.server
0001050: 6170 702e 5365 7276 6572 4170 7022 0a0a  app.ServerApp"..
0001060: 2020 696d 6167 653a 0a20 2020 206e 616d    image:.    nam
0001070: 653a 2061 7869 6f6e 6875 622f 6475 6e65  e: axionhub/dune
0001080: 2d6e 6f74 6562 6f6f 6b0a 2020 2020 7461  -notebook.    ta
0001090: 673a 206c 6174 6573 740a 2020 2020 236e  g: latest.    #n
00010a0: 616d 653a 206d 6170 7361 636f 7374 612f  ame: mapsacosta/
00010b0: 6561 666a 7570 7974 6572 0a20 2020 2023  eafjupyter.    #
00010c0: 7461 673a 2062 6173 652d 6e6f 7465 626f  tag: base-notebo
00010d0: 6f6b 0a20 2020 2070 756c 6c50 6f6c 6963  ok.    pullPolic
00010e0: 793a 2041 6c77 6179 730a 2020 6465 6661  y: Always.  defa
00010f0: 756c 7455 726c 3a20 222f 6c61 6222 0a20  ultUrl: "/lab". 
0001100: 206c 6966 6563 7963 6c65 486f 6f6b 733a   lifecycleHooks:
0001110: 0a20 2020 2070 6f73 7453 7461 7274 3a0a  .    postStart:.
0001120: 2020 2020 2020 6578 6563 3a0a 2020 2020        exec:.    
0001130: 2020 2020 636f 6d6d 616e 643a 0a20 2020      command:.   
0001140: 2020 2020 2020 202d 2022 7368 220a 2020         - "sh".  
0001150: 2020 2020 2020 2020 2d20 222d 6322 0a20          - "-c". 
0001160: 2020 2020 2020 2020 202d 203e 0a20 2020           - >.   
0001170: 2020 2020 2020 2020 206d 6b64 6972 202d           mkdir -
0001180: 7020 202f 686f 6d65 2f24 7b4e 425f 5553  p  /home/${NB_US
0001190: 4552 7d2f 6d79 2d63 6f6e 6461 2d65 6e76  ER}/my-conda-env
00011a0: 732f 3b0a 2020 2020 2020 2020 2020 2020  s/;.            
00011b0: 6368 6f77 6e20 244e 425f 5553 4552 3a64  chown $NB_USER:d
00011c0: 756e 6520 2f68 6f6d 652f 247b 4e42 5f55  une /home/${NB_U
00011d0: 5345 527d 3b0a 2020 2020 2020 2020 2020  SER};.          
00011e0: 2020 6368 6f77 6e20 244e 425f 5553 4552    chown $NB_USER
00011f0: 3a64 756e 6520 2f68 6f6d 652f 247b 4e42  :dune /home/${NB
0001200: 5f55 5345 527d 2f6d 792d 636f 6e64 612d  _USER}/my-conda-
0001210: 656e 7673 2f3b 0a20 2020 2020 2020 2020  envs/;.         
0001220: 2020 2065 6368 6f20 2265 6e76 735f 6469     echo "envs_di
0001230: 7273 3a22 203e 202f 686f 6d65 2f6a 7570  rs:" > /home/jup
0001240: 7974 6572 2f2e 636f 6e64 6172 633b 0a20  yter/.condarc;. 
0001250: 2020 2020 2020 2020 2020 2065 6368 6f20             echo 
0001260: 2220 202d 202f 686f 6d65 2f24 7b4e 425f  "  - /home/${NB_
0001270: 5553 4552 7d2f 6d79 2d63 6f6e 6461 2d65  USER}/my-conda-e
0001280: 6e76 732f 2220 3e3e 202f 686f 6d65 2f6a  nvs/" >> /home/j
0001290: 7570 7974 6572 2f2e 636f 6e64 6172 633b  upyter/.condarc;
00012a0: 0a20 2020 2020 2020 2020 2020 2065 6368  .            ech
00012b0: 6f20 2265 6e76 5f70 726f 6d70 743a 2027  o "env_prompt: '
00012c0: 287b 6e61 6d65 7d29 2027 2220 3e3e 202f  ({name}) '" >> /
00012d0: 686f 6d65 2f6a 7570 7974 6572 2f2e 636f  home/jupyter/.co
00012e0: 6e64 6172 633b 0a20 2020 2020 2020 2020  ndarc;.         
00012f0: 2020 2063 686f 776e 206a 7570 7974 6572     chown jupyter
0001300: 3a64 756e 6520 2f68 6f6d 652f 6a75 7079  :dune /home/jupy
0001310: 7465 722f 2e63 6f6e 6461 7263 3b0a 2020  ter/.condarc;.  
0001320: 2020 2370 7265 5374 6f70 3a0a 2020 7374    #preStop:.  st
0001330: 6f72 6167 653a 0a20 2020 2068 6f6d 654d  orage:.    homeM
0001340: 6f75 6e74 5061 7468 3a20 272f 686f 6d65  ountPath: '/home
0001350: 2f7b 7573 6572 6e61 6d65 7d27 0a20 2020  /{username}'.   
0001360: 2065 7874 7261 566f 6c75 6d65 733a 0a20   extraVolumes:. 
0001370: 2020 2020 202d 206e 616d 653a 2063 766d       - name: cvm
0001380: 6673 2d66 6572 6d69 6c61 620a 2020 2020  fs-fermilab.    
0001390: 2020 2020 7065 7273 6973 7465 6e74 566f      persistentVo
00013a0: 6c75 6d65 436c 6169 6d3a 0a20 2020 2020  lumeClaim:.     
00013b0: 2020 2020 2063 6c61 696d 4e61 6d65 3a20       claimName: 
00013c0: 6a75 7079 7465 7268 7562 2d63 766d 6673  jupyterhub-cvmfs
00013d0: 2d66 6572 6d69 6c61 620a 2020 2020 2020  -fermilab.      
00013e0: 2d20 6e61 6d65 3a20 6376 6d66 732d 6475  - name: cvmfs-du
00013f0: 6e65 0a20 2020 2020 2020 2070 6572 7369  ne.        persi
0001400: 7374 656e 7456 6f6c 756d 6543 6c61 696d  stentVolumeClaim
0001410: 3a0a 2020 2020 2020 2020 2020 636c 6169  :.          clai
0001420: 6d4e 616d 653a 206a 7570 7974 6572 6875  mName: jupyterhu
0001430: 622d 6376 6d66 732d 6475 6e65 0a20 2020  b-cvmfs-dune.   
0001440: 2020 202d 206e 616d 653a 2063 766d 6673     - name: cvmfs
0001450: 2d6c 6172 736f 6674 0a20 2020 2020 2020  -larsoft.       
0001460: 2070 6572 7369 7374 656e 7456 6f6c 756d   persistentVolum
0001470: 6543 6c61 696d 3a0a 2020 2020 2020 2020  eClaim:.        
0001480: 2020 636c 6169 6d4e 616d 653a 206a 7570    claimName: jup
0001490: 7974 6572 6875 622d 6376 6d66 732d 6c61  yterhub-cvmfs-la
00014a0: 7273 6f66 740a 2020 2020 2020 2d20 6e61  rsoft.      - na
00014b0: 6d65 3a20 6170 700a 2020 2020 2020 2020  me: app.        
00014c0: 6365 7068 6673 3a0a 2020 2020 2020 2020  cephfs:.        
00014d0: 2020 6d6f 6e69 746f 7273 3a0a 2020 2020    monitors:.    
00014e0: 2020 2020 2020 2d20 3130 2e33 302e 3230        - 10.30.20
00014f0: 312e 333a 3637 3839 0a20 2020 2020 2020  1.3:6789.       
0001500: 2020 202d 2031 302e 3330 2e32 3032 2e33     - 10.30.202.3
0001510: 3a36 3738 390a 2020 2020 2020 2020 2020  :6789.          
0001520: 2d20 3130 2e33 302e 3230 332e 333a 3637  - 10.30.203.3:67
0001530: 3839 0a20 2020 2020 2020 2020 2070 6174  89.          pat
0001540: 683a 202f 766f 6c75 6d65 732f 5f6e 6f67  h: /volumes/_nog
0001550: 726f 7570 2f61 3336 6632 3539 632d 3538  roup/a36f259c-58
0001560: 3266 2d34 3830 642d 3934 3038 2d39 6462  2f-480d-9408-9db
0001570: 3961 3334 3935 6239 650a 2020 2020 2020  9a3495b9e.      
0001580: 2020 2020 7573 6572 3a20 6170 702d 7265      user: app-re
0001590: 6164 2d77 7269 7465 0a20 2020 2020 2020  ad-write.       
00015a0: 2020 2073 6563 7265 7452 6566 3a0a 2020     secretRef:.  
00015b0: 2020 2020 2020 2020 2020 6e61 6d65 3a20            name: 
00015c0: 6170 702d 7365 6372 6574 2d72 770a 2020  app-secret-rw.  
00015d0: 2020 2020 2d20 6e61 6d65 3a20 6461 7461      - name: data
00015e0: 0a20 2020 2020 2020 2063 6570 6866 733a  .        cephfs:
00015f0: 0a20 2020 2020 2020 2020 206d 6f6e 6974  .          monit
0001600: 6f72 733a 0a20 2020 2020 2020 2020 202d  ors:.          -
0001610: 2031 302e 3330 2e32 3031 2e33 3a36 3738   10.30.201.3:678
0001620: 390a 2020 2020 2020 2020 2020 2d20 3130  9.          - 10
0001630: 2e33 302e 3230 322e 333a 3637 3839 0a20  .30.202.3:6789. 
0001640: 2020 2020 2020 2020 202d 2031 302e 3330           - 10.30
0001650: 2e32 3033 2e33 3a36 3738 390a 2020 2020  .203.3:6789.    
0001660: 2020 2020 2020 7061 7468 3a20 2f76 6f6c        path: /vol
0001670: 756d 6573 2f5f 6e6f 6772 6f75 702f 6333  umes/_nogroup/c3
0001680: 3862 6165 3832 2d64 3730 332d 3431 6332  8bae82-d703-41c2
0001690: 2d38 3861 322d 6330 3530 3761 3062 3934  -88a2-c0507a0b94
00016a0: 6261 0a20 2020 2020 2020 2020 2075 7365  ba.          use
00016b0: 723a 2064 6174 612d 7265 6164 2d77 7269  r: data-read-wri
00016c0: 7465 0a20 2020 2020 2020 2020 2073 6563  te.          sec
00016d0: 7265 7452 6566 3a0a 2020 2020 2020 2020  retRef:.        
00016e0: 2020 2020 6e61 6d65 3a20 6461 7461 2d73      name: data-s
00016f0: 6563 7265 742d 7277 0a20 2020 2020 202d  ecret-rw.      -
0001700: 206e 616d 653a 2073 746f 7265 0a20 2020   name: store.   
0001710: 2020 2020 2063 6570 6866 733a 0a20 2020       cephfs:.   
0001720: 2020 2020 2020 206d 6f6e 6974 6f72 733a         monitors:
0001730: 0a20 2020 2020 2020 2020 202d 2031 302e  .          - 10.
0001740: 3330 2e32 3031 2e33 3a36 3738 390a 2020  30.201.3:6789.  
0001750: 2020 2020 2020 2020 2d20 3130 2e33 302e          - 10.30.
0001760: 3230 322e 333a 3637 3839 0a20 2020 2020  202.3:6789.     
0001770: 2020 2020 202d 2031 302e 3330 2e32 3033       - 10.30.203
0001780: 2e33 3a36 3738 390a 2020 2020 2020 2020  .3:6789.        
0001790: 2020 7061 7468 3a20 2f76 6f6c 756d 6573    path: /volumes
00017a0: 2f5f 6e6f 6772 6f75 702f 6136 3531 6564  /_nogroup/a651ed
00017b0: 3732 2d33 6265 652d 3433 3139 2d38 6362  72-3bee-4319-8cb
00017c0: 392d 3762 3435 6234 3161 6438 3931 2f6a  9-7b45b41ad891/j
00017d0: 7570 7974 6572 5f64 6174 612f 0a20 2020  upyter_data/.   
00017e0: 2020 2020 2020 2075 7365 723a 2073 6861         user: sha
00017f0: 7265 642d 6461 7461 2d72 6561 642d 7772  red-data-read-wr
0001800: 6974 650a 2020 2020 2020 2020 2020 7365  ite.          se
0001810: 6372 6574 5265 663a 0a20 2020 2020 2020  cretRef:.       
0001820: 2020 2020 206e 616d 653a 2073 746f 7265       name: store
0001830: 2d73 6563 7265 742d 7277 0a0a 2020 2020  -secret-rw..    
0001840: 6578 7472 6156 6f6c 756d 654d 6f75 6e74  extraVolumeMount
0001850: 733a 0a20 2020 2020 202d 206e 616d 653a  s:.      - name:
0001860: 2063 766d 6673 2d66 6572 6d69 6c61 620a   cvmfs-fermilab.
0001870: 2020 2020 2020 2020 6d6f 756e 7450 6174          mountPat
0001880: 683a 202f 6376 6d66 732f 6665 726d 696c  h: /cvmfs/fermil
0001890: 6162 2e6f 7065 6e73 6369 656e 6365 6772  ab.opensciencegr
00018a0: 6964 2e6f 7267 2f0a 2020 2020 2020 2d20  id.org/.      - 
00018b0: 6e61 6d65 3a20 6376 6d66 732d 6c61 7273  name: cvmfs-lars
00018c0: 6f66 740a 2020 2020 2020 2020 6d6f 756e  oft.        moun
00018d0: 7450 6174 683a 202f 6376 6d66 732f 6c61  tPath: /cvmfs/la
00018e0: 7273 6f66 742e 6f70 656e 7363 6965 6e63  rsoft.openscienc
00018f0: 6567 7269 642e 6f72 672f 0a20 2020 2020  egrid.org/.     
0001900: 202d 206e 616d 653a 2063 766d 6673 2d64   - name: cvmfs-d
0001910: 756e 650a 2020 2020 2020 2020 6d6f 756e  une.        moun
0001920: 7450 6174 683a 202f 6376 6d66 732f 6475  tPath: /cvmfs/du
0001930: 6e65 2e6f 7065 6e73 6369 656e 6365 6772  ne.opensciencegr
0001940: 6964 2e6f 7267 2f0a 2020 2020 2020 2d20  id.org/.      - 
0001950: 6e61 6d65 3a20 6170 700a 2020 2020 2020  name: app.      
0001960: 2020 6d6f 756e 7450 6174 683a 202f 6475    mountPath: /du
0001970: 6e65 2f61 7070 2f0a 2020 2020 2020 2d20  ne/app/.      - 
0001980: 6e61 6d65 3a20 6461 7461 0a20 2020 2020  name: data.     
0001990: 2020 206d 6f75 6e74 5061 7468 3a20 2f64     mountPath: /d
00019a0: 756e 652f 6461 7461 2f0a 2020 2020 2020  une/data/.      
00019b0: 2d20 6e61 6d65 3a20 7374 6f72 650a 2020  - name: store.  
00019c0: 2020 2020 2020 6d6f 756e 7450 6174 683a        mountPath:
00019d0: 202f 746d 702f 636f 6e66 6967 5f64 6174   /tmp/config_dat
00019e0: 610a 0a69 6e67 7265 7373 3a0a 2020 656e  a..ingress:.  en
00019f0: 6162 6c65 643a 2074 7275 650a 2020 616e  abled: true.  an
0001a00: 6e6f 7461 7469 6f6e 733a 0a20 2020 2023  notations:.    #
0001a10: 2075 7365 2074 6865 2073 6861 7265 6420   use the shared 
0001a20: 696e 6772 6573 732d 6e67 696e 780a 2020  ingress-nginx.  
0001a30: 2020 6b75 6265 726e 6574 6573 2e69 6f2f    kubernetes.io/
0001a40: 696e 6772 6573 732e 636c 6173 733a 2022  ingress.class: "
0001a50: 6e67 696e 7822 0a20 2020 206e 6769 6e78  nginx".    nginx
0001a60: 2e69 6e67 7265 7373 2e6b 7562 6572 6e65  .ingress.kuberne
0001a70: 7465 732e 696f 2f72 6577 7269 7465 2d74  tes.io/rewrite-t
0001a80: 6172 6765 743a 202f 0a20 2068 6f73 7473  arget: /.  hosts
0001a90: 3a20 0a20 2020 202d 2061 7869 6f6e 2e61  : .    - axion.a
0001aa0: 7869 616c 7665 6374 6f72 2d6c 6162 2e63  xialvector-lab.c
0001ab0: 6f6d 0a70 726f 7879 3a0a 2020 7365 7276  om.proxy:.  serv
0001ac0: 6963 653a 0a20 2020 2074 7970 653a 2043  ice:.    type: C
0001ad0: 6c75 7374 6572 4950 0a                   lusterIP.
